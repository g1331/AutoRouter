# AutoRouter Environment Configuration Template
# Copy this file to .env and fill in your values

# ============================================================================
# Docker Deployment Settings
# ============================================================================
# Image tag for docker-compose (set by CI/CD)
IMAGE_TAG=latest

# PostgreSQL credentials (for docker-compose)
POSTGRES_USER=autorouter
POSTGRES_PASSWORD=change-this-password
POSTGRES_DB=autorouter

# ============================================================================
# Database Configuration (REQUIRED)
# ============================================================================
# Database type: "postgres" (default) or "sqlite" (local development)
# When DB_TYPE is not set, auto-detects: postgres if DATABASE_URL exists, else sqlite
# DB_TYPE=postgres

# PostgreSQL connection string
# For Docker: use container name as host
DATABASE_URL=postgresql://autorouter:change-this-password@db:5432/autorouter
# For local development:
# DATABASE_URL=postgresql://autorouter:password@localhost:5432/autorouter

# SQLite database path (only used when DB_TYPE=sqlite)
# SQLITE_DB_PATH=./data/dev.sqlite

# ============================================================================
# Encryption Settings (REQUIRED)
# ============================================================================
# Generate a new key with:
# node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
#
# CRITICAL: Back up this key securely! Losing it means all upstream API keys become unreadable.
ENCRYPTION_KEY=your-base64-32-byte-key-here

# Alternative: Read key from file
# ENCRYPTION_KEY_FILE=/path/to/encryption.key

# ============================================================================
# Admin Authentication (REQUIRED for Admin API)
# ============================================================================
# Set a strong admin token for accessing /api/admin/* endpoints
ADMIN_TOKEN=your-secret-admin-token-here

# ============================================================================
# Optional Settings
# ============================================================================

# Request Log Retention
# Number of days to retain request logs (default: 90)
LOG_RETENTION_DAYS=90

# Allow revealing API keys via Admin API (default: false)
ALLOW_KEY_REVEAL=false

# Debug logging for headers (default: false)
DEBUG_LOG_HEADERS=false

# Log level: fatal, error, warn, info, debug, trace
# Default: "info" in production, "debug" in development
# LOG_LEVEL=info

# CORS Origins (comma-separated, default: http://localhost:3000)
CORS_ORIGINS=http://localhost:3000

# Server port (default: 3000)
PORT=3000

# ============================================================================
# Traffic Recorder (Development Only)
# ============================================================================
# Enable traffic recording to capture request/response fixtures
# Recorded fixtures can be replayed via /api/mock/* endpoint
# RECORDER_ENABLED=true

# Directory to store recorded fixtures (default: tests/fixtures)
# RECORDER_FIXTURES_DIR=tests/fixtures

# Redact sensitive fields in recorded fixtures (default: true)
# Set to false only for trusted local debugging environments.
# RECORDER_REDACT_SENSITIVE=true
