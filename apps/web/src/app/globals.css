/**
 * Cassette Futurism Design System
 * AutoRouter Admin Console
 *
 * A retro-futuristic visual language inspired by 1980s-90s science fiction interfaces.
 * References: Blade Runner, Alien, 2001: A Space Odyssey
 */

@import "tailwindcss";
@config "../../tailwind.config.ts";

/* ============================================
   CSS Variables - Cassette Futurism Tokens
   ============================================ */

:root {
  color-scheme: dark;

  /* === Amber Scale (Primary) === */
  --cf-amber-50: #FFF8E1;
  --cf-amber-100: #FFECB3;
  --cf-amber-200: #FFE082;
  --cf-amber-300: #FFD54F;
  --cf-amber-400: #FFCA28;
  --cf-amber-500: #FFBF00;
  --cf-amber-600: #FFB300;
  --cf-amber-700: #FFA000;
  --cf-amber-800: #FF8F00;
  --cf-amber-900: #FF6F00;

  /* === Black Scale (Backgrounds) === */
  --cf-black-900: #0A0A0A;
  --cf-black-800: #121212;
  --cf-black-700: #1A1A1A;
  --cf-black-600: #242424;
  --cf-black-500: #2E2E2E;

  /* === Surface Scale (Semantic) === */
  --cf-surface-100: #0A0A0A;
  --cf-surface-200: #121212;
  --cf-surface-300: #1A1A1A;
  --cf-surface-400: #242424;
  --cf-surface-500: #2E2E2E;
  --cf-surface-600: #3A3A3A;

  /* === Status Colors === */
  --cf-status-success: #00FF41;
  --cf-status-success-muted: rgba(0, 255, 65, 0.15);
  --cf-status-warning: #FFBF00;
  --cf-status-warning-muted: rgba(255, 191, 0, 0.15);
  --cf-status-error: #FF3131;
  --cf-status-error-muted: rgba(255, 49, 49, 0.15);
  --cf-status-info: #00D4FF;
  --cf-status-info-muted: rgba(0, 212, 255, 0.15);

  /* === Functional Tokens === */
  --cf-disabled-bg: #1A1A1A;
  --cf-disabled-text: #666666;
  --cf-disabled-border: #333333;
  --cf-divider: #333333;
  --cf-divider-subtle: #1F1F1F;
  --cf-overlay: rgba(0, 0, 0, 0.7);
  --cf-overlay-light: rgba(0, 0, 0, 0.5);

  /* === Focus States === */
  --cf-focus-ring: #FFBF00;
  --cf-focus-ring-width: 2px;
  --cf-focus-ring-offset: 2px;
  --cf-focus-glow: 0 0 0 3px rgba(255, 191, 0, 0.3);

  /* === Typography === */
  --cf-font-sans: var(--font-sans), "Inter", "Noto Sans SC", system-ui, sans-serif;
  --cf-font-mono: var(--font-mono), "JetBrains Mono", "Fira Code", monospace;
  --cf-font-display: "VT323", var(--font-mono), monospace;

  /* === Corners & Borders === */
  --cf-corner-none: 0;
  --cf-corner-small: 2px;
  --cf-corner-medium: 4px;
  --cf-corner-bevel: 8px 0;

  --cf-border-thin: 1px solid var(--cf-amber-500);
  --cf-border-medium: 2px solid var(--cf-amber-500);
  --cf-border-thick: 3px solid var(--cf-amber-500);

  /* === Glow Effects === */
  --cf-glow-subtle: 0 0 4px var(--cf-amber-500);
  --cf-glow-medium: 0 0 8px var(--cf-amber-500);
  --cf-glow-strong: 0 0 16px var(--cf-amber-500), 0 0 32px rgba(255, 191, 0, 0.3);
  --cf-glow-success: 0 0 8px var(--cf-status-success);
  --cf-glow-error: 0 0 8px var(--cf-status-error);
  --cf-glow-info: 0 0 8px var(--cf-status-info);

  /* === Animation === */
  --cf-duration-fast: 100ms;
  --cf-duration-normal: 200ms;
  --cf-duration-slow: 300ms;
  --cf-easing-standard: cubic-bezier(0.4, 0, 0.2, 1);
  --cf-easing-sharp: cubic-bezier(0.4, 0, 0.6, 1);

  /* === Shadcn/ui Compatibility Mappings === */
  --background: var(--cf-surface-100);
  --foreground: var(--cf-amber-500);
  --card: var(--cf-surface-300);
  --card-foreground: var(--cf-amber-500);
  --popover: var(--cf-surface-300);
  --popover-foreground: var(--cf-amber-500);
  --primary: var(--cf-amber-500);
  --primary-foreground: var(--cf-black-900);
  --secondary: var(--cf-surface-400);
  --secondary-foreground: var(--cf-amber-500);
  --muted: var(--cf-surface-400);
  --muted-foreground: var(--cf-disabled-text);
  --accent: var(--cf-amber-700);
  --accent-foreground: var(--cf-black-900);
  --destructive: var(--cf-status-error);
  --destructive-foreground: var(--cf-black-900);
  --border: var(--cf-divider);
  --input: rgba(255, 191, 0, 0.5);
  --ring: var(--cf-focus-ring);
  --radius: var(--cf-corner-small);

  /* Sidebar compatibility */
  --sidebar: var(--cf-black-900);
  --sidebar-foreground: var(--cf-amber-500);
  --sidebar-primary: var(--cf-amber-500);
  --sidebar-primary-foreground: var(--cf-black-900);
  --sidebar-accent: var(--cf-surface-300);
  --sidebar-accent-foreground: var(--cf-amber-500);
  --sidebar-border: var(--cf-divider-subtle);
  --sidebar-ring: var(--cf-focus-ring);
}

/* ============================================
   Light Theme - Vintage Paper CRT Mode
   ============================================ */

.light {
  color-scheme: light;

  /* === Amber Scale (Primary) - Darkened for WCAG 4.5:1 contrast on light backgrounds === */
  --cf-amber-50: #FFF2D6;
  --cf-amber-100: #FFE8B8;
  --cf-amber-200: #FFDD9C;
  --cf-amber-300: #E8A800;
  --cf-amber-400: #C99200;
  --cf-amber-500: #8B5A00;  /* Darkened from #D69500 for ~6.5:1 contrast ratio */
  --cf-amber-600: #7A4E00;
  --cf-amber-700: #684200;
  --cf-amber-800: #573700;
  --cf-amber-900: #462C00;

  /* === Paper / Surface Scale (Sepia-tinted) === */
  --cf-black-900: #FDF8EF;
  --cf-black-800: #F5EDE0;
  --cf-black-700: #EBE2D3;
  --cf-black-600: #DFD4C3;
  --cf-black-500: #D1C5B2;

  --cf-surface-100: #FDF8EF;
  --cf-surface-200: #F8F1E5;
  --cf-surface-300: #F0E8D8;
  --cf-surface-400: #E5DAC6;
  --cf-surface-500: #D8CCB5;
  --cf-surface-600: #C9BC9F;

  /* === Status Colors (Contrast-adjusted for light bg) === */
  --cf-status-success: #0D7A35;
  --cf-status-success-muted: rgba(13, 122, 53, 0.15);
  --cf-status-warning: #B86E00;
  --cf-status-warning-muted: rgba(184, 110, 0, 0.15);
  --cf-status-error: #C41E1E;
  --cf-status-error-muted: rgba(196, 30, 30, 0.15);
  --cf-status-info: #0A6499;
  --cf-status-info-muted: rgba(10, 100, 153, 0.15);

  /* === Functional Tokens === */
  --cf-disabled-bg: #F0E8D8;
  --cf-disabled-text: #8A7A5A;
  --cf-disabled-border: #DDD0B8;
  --cf-divider: #D8C9AC;
  --cf-divider-subtle: #E8DCC6;
  --cf-overlay: rgba(253, 248, 239, 0.85);
  --cf-overlay-light: rgba(253, 248, 239, 0.6);

  /* === Focus States (Using darker amber for light mode) === */
  --cf-focus-ring: #8B5A00;
  --cf-focus-glow: 0 0 0 3px rgba(139, 90, 0, 0.3);

  /* === Glow Effects (Using darker amber for light mode) === */
  --cf-glow-subtle: 0 0 4px rgba(139, 90, 0, 0.4);
  --cf-glow-medium: 0 0 8px rgba(139, 90, 0, 0.5);
  --cf-glow-strong: 0 0 12px rgba(139, 90, 0, 0.6), 0 0 24px rgba(139, 90, 0, 0.25);

  /* === Shadcn/ui Compatibility Mappings === */
  --background: var(--cf-surface-100);
  --foreground: #2A1F0A;
  --card: var(--cf-surface-200);
  --card-foreground: #2A1F0A;
  --popover: var(--cf-surface-200);
  --popover-foreground: #2A1F0A;
  --primary: var(--cf-amber-500);
  --primary-foreground: #FFFAF0;
  --secondary: var(--cf-surface-400);
  --secondary-foreground: #3D2E12;
  --muted: var(--cf-surface-400);
  --muted-foreground: #6B5A3A;
  --accent: var(--cf-amber-600);
  --accent-foreground: #FFFAF0;
  --destructive: var(--cf-status-error);
  --destructive-foreground: #FFFAF0;
  --border: var(--cf-divider);
  --input: rgba(42, 31, 10, 0.2);
  --ring: var(--cf-focus-ring);

  /* Sidebar compatibility */
  --sidebar: var(--cf-surface-200);
  --sidebar-foreground: #2A1F0A;
  --sidebar-primary: var(--cf-amber-500);
  --sidebar-primary-foreground: #FFFAF0;
  --sidebar-accent: var(--cf-surface-300);
  --sidebar-accent-foreground: #2A1F0A;
  --sidebar-border: var(--cf-divider);
  --sidebar-ring: var(--cf-focus-ring);
}

/* ============================================
   Theme Switch Animation - CRT Power Cycle
   ============================================ */

@keyframes cf-theme-flash {
  0% {
    opacity: 0.95;
    filter: blur(3px) brightness(1.4);
  }
  30% {
    opacity: 0.7;
    filter: blur(1px) brightness(1.2);
  }
  60% {
    opacity: 0.3;
    filter: blur(0.5px) brightness(1);
  }
  100% {
    opacity: 0;
    filter: blur(0) brightness(1);
  }
}

@keyframes cf-theme-scanline {
  0% {
    transform: translateY(-100%);
    opacity: 0.9;
  }
  50% {
    opacity: 0.6;
  }
  100% {
    transform: translateY(100%);
    opacity: 0;
  }
}

@keyframes cf-toggle-glow {
  0%, 100% {
    box-shadow: 0 0 8px var(--cf-amber-500), inset 0 0 4px rgba(255, 191, 0, 0.2);
  }
  50% {
    box-shadow: 0 0 16px var(--cf-amber-500), inset 0 0 8px rgba(255, 191, 0, 0.4);
  }
}

@keyframes cf-toggle-scanline {
  0% {
    transform: translateY(-100%);
  }
  100% {
    transform: translateY(200%);
  }
}

/* Theme switch overlay - CRT power cycle effect */
html.theme-switching::before,
html.theme-switching::after {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 99999;
}

html.theme-switching::before {
  background: radial-gradient(
    ellipse at center,
    rgba(255, 191, 0, 0.4) 0%,
    rgba(255, 191, 0, 0.2) 30%,
    rgba(0, 0, 0, 0.6) 100%
  );
  animation: cf-theme-flash 500ms ease-out forwards;
}

html.theme-switching::after {
  background: repeating-linear-gradient(
    to bottom,
    transparent 0px,
    transparent 2px,
    rgba(255, 191, 0, 0.5) 2px,
    rgba(255, 191, 0, 0.5) 4px
  );
  animation: cf-theme-scanline 600ms ease-in-out forwards;
}

/* Light mode overlay uses darker colors */
html.light.theme-switching::before {
  background: radial-gradient(
    ellipse at center,
    rgba(214, 149, 0, 0.5) 0%,
    rgba(214, 149, 0, 0.25) 30%,
    rgba(253, 248, 239, 0.8) 100%
  );
}

html.light.theme-switching::after {
  background: repeating-linear-gradient(
    to bottom,
    transparent 0px,
    transparent 2px,
    rgba(214, 149, 0, 0.6) 2px,
    rgba(214, 149, 0, 0.6) 4px
  );
}

/* ============================================
   Base Styles
   ============================================ */

@layer base {
  *,
  *::before,
  *::after {
    box-sizing: border-box;
    border-color: var(--cf-divider);
  }

  html {
    background: var(--cf-black-900);
  }

  body {
    background: var(--cf-black-900);
    color: var(--cf-amber-500);
    font-family: var(--cf-font-sans);
    font-feature-settings: "liga" 1, "calt" 1;
    min-height: 100vh;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* Focus ring for all focusable elements */
  :focus-visible {
    outline: var(--cf-focus-ring-width) solid var(--cf-focus-ring);
    outline-offset: var(--cf-focus-ring-offset);
  }

  /* Selection */
  ::selection {
    background: var(--cf-amber-500);
    color: var(--cf-black-900);
  }

  /* Scrollbar theming */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    background: var(--cf-black-800);
  }

  ::-webkit-scrollbar-thumb {
    background: var(--cf-amber-700);
    border-radius: var(--cf-corner-small);
  }

  ::-webkit-scrollbar-thumb:hover {
    background: var(--cf-amber-500);
  }

  /* Firefox scrollbar */
  * {
    scrollbar-width: thin;
    scrollbar-color: var(--cf-amber-700) var(--cf-black-800);
  }
}

/* ============================================
   CRT Effects
   ============================================ */

@layer components {
  /* Scanlines - use sparingly on hero panels, topbar */
  .cf-scanlines {
    position: relative;
  }

  .cf-scanlines::before {
    content: "";
    position: absolute;
    inset: 0;
    background: repeating-linear-gradient(
      0deg,
      transparent,
      transparent 1px,
      rgba(0, 0, 0, 0.15) 1px,
      rgba(0, 0, 0, 0.15) 2px
    );
    pointer-events: none;
    z-index: 10;
  }

  /* Noise texture - for page backgrounds only */
  .cf-noise {
    position: relative;
  }

  .cf-noise::after {
    content: "";
    position: fixed;
    inset: 0;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
    opacity: 0.02;
    pointer-events: none;
    z-index: 0;
  }

  /* Glow text - for logos, important numbers */
  .cf-glow-text {
    text-shadow: 0 0 4px currentColor;
  }

  .cf-glow-text-strong {
    text-shadow: 0 0 8px currentColor, 0 0 16px currentColor;
  }

  /* Blinking cursor - login page only */
  .cf-cursor-blink::after {
    content: "_";
    animation: cf-blink 1s step-end infinite;
  }

  @keyframes cf-blink {
    0%, 50% { opacity: 1; }
    51%, 100% { opacity: 0; }
  }

  /* Panel with glow border */
  .cf-panel {
    background: var(--cf-surface-300);
    border: var(--cf-border-medium);
    padding: 1rem;
    transition: box-shadow var(--cf-duration-normal) var(--cf-easing-standard);
  }

  .cf-panel:hover {
    box-shadow: var(--cf-glow-subtle);
  }

  .cf-panel-glow {
    box-shadow: var(--cf-glow-medium);
  }
}

/* ============================================
   Typography Utilities
   ============================================ */

@layer utilities {
  /* Font families */
  .font-mono {
    font-family: var(--cf-font-mono);
  }

  .font-display {
    font-family: var(--cf-font-display);
  }

  .font-sans {
    font-family: var(--cf-font-sans);
  }

  /* Display styles (VT323) */
  .type-display-large {
    font-family: var(--cf-font-display);
    font-size: 3rem;
    line-height: 1.2;
  }

  .type-display-medium {
    font-family: var(--cf-font-display);
    font-size: 2.25rem;
    line-height: 1.2;
  }

  .type-display-small {
    font-family: var(--cf-font-display);
    font-size: 1.5rem;
    line-height: 1.3;
  }

  /* Headline styles (JetBrains Mono) */
  .type-headline {
    font-family: var(--cf-font-mono);
    font-size: 1.25rem;
    font-weight: 500;
    line-height: 1.4;
  }

  .type-title-large {
    font-family: var(--cf-font-mono);
    font-size: 1.125rem;
    font-weight: 500;
    line-height: 1.4;
  }

  .type-title-medium {
    font-family: var(--cf-font-mono);
    font-size: 1rem;
    font-weight: 500;
    line-height: 1.5;
  }

  .type-title-small {
    font-family: var(--cf-font-mono);
    font-size: 0.875rem;
    font-weight: 500;
    line-height: 1.5;
  }

  /* Body styles (Inter) */
  .type-body-large {
    font-family: var(--cf-font-sans);
    font-size: 1rem;
    line-height: 1.6;
  }

  .type-body-medium {
    font-family: var(--cf-font-sans);
    font-size: 0.875rem;
    line-height: 1.6;
  }

  .type-body-small {
    font-family: var(--cf-font-sans);
    font-size: 0.75rem;
    line-height: 1.5;
  }

  /* Data/code styles (JetBrains Mono) */
  .type-data {
    font-family: var(--cf-font-mono);
    font-size: 0.875rem;
    line-height: 1.5;
  }

  .type-code {
    font-family: var(--cf-font-mono);
    font-size: 0.875rem;
    line-height: 1.6;
  }

  /* Label style */
  .type-label {
    font-family: var(--cf-font-mono);
    font-size: 0.75rem;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    line-height: 1.3;
  }

  /* Caption style */
  .type-caption {
    font-family: var(--cf-font-sans);
    font-size: 0.6875rem;
    line-height: 1.4;
  }

  /* Color utilities */
  .text-amber {
    color: var(--cf-amber-500);
  }

  .text-amber-muted {
    color: var(--cf-amber-700);
  }

  .text-success {
    color: var(--cf-status-success);
  }

  .text-error {
    color: var(--cf-status-error);
  }

  .text-warning {
    color: var(--cf-status-warning);
  }

  .text-info {
    color: var(--cf-status-info);
  }

  .text-disabled {
    color: var(--cf-disabled-text);
  }

  .bg-surface-100 {
    background: var(--cf-surface-100);
  }

  .bg-surface-200 {
    background: var(--cf-surface-200);
  }

  .bg-surface-300 {
    background: var(--cf-surface-300);
  }

  .bg-surface-400 {
    background: var(--cf-surface-400);
  }

  .bg-surface-500 {
    background: var(--cf-surface-500);
  }

  .bg-surface-600 {
    background: var(--cf-surface-600);
  }

  /* Border utilities */
  .border-amber {
    border-color: var(--cf-amber-500);
  }

  .border-divider {
    border-color: var(--cf-divider);
  }

  .border-divider-subtle {
    border-color: var(--cf-divider-subtle);
  }

  /* Glow utilities */
  .glow-amber {
    box-shadow: var(--cf-glow-medium);
  }

  .glow-success {
    box-shadow: var(--cf-glow-success);
  }

  .glow-error {
    box-shadow: var(--cf-glow-error);
  }
}

/* ============================================
   Accessibility - Reduced Motion
   ============================================ */

@media (prefers-reduced-motion: reduce) {
  .cf-scanlines::before,
  .cf-noise::after {
    display: none;
  }

  .cf-glow-text,
  .cf-glow-text-strong {
    text-shadow: none;
  }

  .cf-cursor-blink::after {
    animation: none;
    opacity: 1;
  }

  /* Disable theme switch animation */
  html.theme-switching::before,
  html.theme-switching::after {
    display: none;
  }

  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* ============================================
   Accessibility - High Contrast
   ============================================ */

@media (prefers-contrast: more) {
  :root {
    --cf-amber-500: #FFD700;
    --cf-divider: #4A4A4A;
    --cf-disabled-text: #888888;
  }

  .cf-scanlines::before,
  .cf-noise::after {
    display: none;
  }

  .cf-glow-text,
  .cf-glow-text-strong {
    text-shadow: none;
    font-weight: 600;
  }
}

/* ============================================
   Minimal Effects Mode (User Toggle)
   ============================================ */

[data-minimal-effects="true"] .cf-scanlines::before,
[data-minimal-effects="true"] .cf-noise::after {
  display: none;
}

[data-minimal-effects="true"] .cf-glow-text,
[data-minimal-effects="true"] .cf-glow-text-strong {
  text-shadow: none;
}

[data-minimal-effects="true"] .cf-cursor-blink::after {
  animation: none;
  opacity: 1;
}
