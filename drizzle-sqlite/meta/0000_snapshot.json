{
  "version": "6",
  "dialect": "sqlite",
  "id": "4ecfb35b-c3ec-4dfb-9628-9bca7136e710",
  "prevId": "00000000-0000-0000-0000-000000000000",
  "tables": {
    "api_key_upstreams": {
      "name": "api_key_upstreams",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "api_key_id": {
          "name": "api_key_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "upstream_id": {
          "name": "upstream_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(cast((julianday('now') - 2440587.5)*86400000 as integer))"
        }
      },
      "indexes": {
        "api_key_upstreams_api_key_id_idx": {
          "name": "api_key_upstreams_api_key_id_idx",
          "columns": ["api_key_id"],
          "isUnique": false
        },
        "api_key_upstreams_upstream_id_idx": {
          "name": "api_key_upstreams_upstream_id_idx",
          "columns": ["upstream_id"],
          "isUnique": false
        },
        "uq_api_key_upstream": {
          "name": "uq_api_key_upstream",
          "columns": ["api_key_id", "upstream_id"],
          "isUnique": true
        }
      },
      "foreignKeys": {
        "api_key_upstreams_api_key_id_api_keys_id_fk": {
          "name": "api_key_upstreams_api_key_id_api_keys_id_fk",
          "tableFrom": "api_key_upstreams",
          "tableTo": "api_keys",
          "columnsFrom": ["api_key_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "api_key_upstreams_upstream_id_upstreams_id_fk": {
          "name": "api_key_upstreams_upstream_id_upstreams_id_fk",
          "tableFrom": "api_key_upstreams",
          "tableTo": "upstreams",
          "columnsFrom": ["upstream_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "api_keys": {
      "name": "api_keys",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "key_hash": {
          "name": "key_hash",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "key_value_encrypted": {
          "name": "key_value_encrypted",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "key_prefix": {
          "name": "key_prefix",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "user_id": {
          "name": "user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "is_active": {
          "name": "is_active",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": true
        },
        "expires_at": {
          "name": "expires_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(cast((julianday('now') - 2440587.5)*86400000 as integer))"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(cast((julianday('now') - 2440587.5)*86400000 as integer))"
        }
      },
      "indexes": {
        "api_keys_key_hash_unique": {
          "name": "api_keys_key_hash_unique",
          "columns": ["key_hash"],
          "isUnique": true
        },
        "api_keys_key_hash_idx": {
          "name": "api_keys_key_hash_idx",
          "columns": ["key_hash"],
          "isUnique": false
        },
        "api_keys_is_active_idx": {
          "name": "api_keys_is_active_idx",
          "columns": ["is_active"],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "billing_manual_price_overrides": {
      "name": "billing_manual_price_overrides",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "model": {
          "name": "model",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "input_price_per_million": {
          "name": "input_price_per_million",
          "type": "real",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "output_price_per_million": {
          "name": "output_price_per_million",
          "type": "real",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "note": {
          "name": "note",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(cast((julianday('now') - 2440587.5)*86400000 as integer))"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(cast((julianday('now') - 2440587.5)*86400000 as integer))"
        }
      },
      "indexes": {
        "billing_manual_price_overrides_model_unique": {
          "name": "billing_manual_price_overrides_model_unique",
          "columns": ["model"],
          "isUnique": true
        },
        "billing_manual_price_overrides_model_idx": {
          "name": "billing_manual_price_overrides_model_idx",
          "columns": ["model"],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "billing_model_prices": {
      "name": "billing_model_prices",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "model": {
          "name": "model",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "input_price_per_million": {
          "name": "input_price_per_million",
          "type": "real",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "output_price_per_million": {
          "name": "output_price_per_million",
          "type": "real",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "source": {
          "name": "source",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "is_active": {
          "name": "is_active",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": true
        },
        "synced_at": {
          "name": "synced_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(cast((julianday('now') - 2440587.5)*86400000 as integer))"
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(cast((julianday('now') - 2440587.5)*86400000 as integer))"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(cast((julianday('now') - 2440587.5)*86400000 as integer))"
        }
      },
      "indexes": {
        "billing_model_prices_model_idx": {
          "name": "billing_model_prices_model_idx",
          "columns": ["model"],
          "isUnique": false
        },
        "billing_model_prices_source_idx": {
          "name": "billing_model_prices_source_idx",
          "columns": ["source"],
          "isUnique": false
        },
        "uq_billing_model_prices_model_source": {
          "name": "uq_billing_model_prices_model_source",
          "columns": ["model", "source"],
          "isUnique": true
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "billing_price_sync_history": {
      "name": "billing_price_sync_history",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "source": {
          "name": "source",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "success_count": {
          "name": "success_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "failure_count": {
          "name": "failure_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "failure_reason": {
          "name": "failure_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(cast((julianday('now') - 2440587.5)*86400000 as integer))"
        }
      },
      "indexes": {
        "billing_price_sync_history_created_at_idx": {
          "name": "billing_price_sync_history_created_at_idx",
          "columns": ["created_at"],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "circuit_breaker_states": {
      "name": "circuit_breaker_states",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "upstream_id": {
          "name": "upstream_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "state": {
          "name": "state",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'closed'"
        },
        "failure_count": {
          "name": "failure_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "success_count": {
          "name": "success_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "last_failure_at": {
          "name": "last_failure_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "opened_at": {
          "name": "opened_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "last_probe_at": {
          "name": "last_probe_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "config": {
          "name": "config",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(cast((julianday('now') - 2440587.5)*86400000 as integer))"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(cast((julianday('now') - 2440587.5)*86400000 as integer))"
        }
      },
      "indexes": {
        "circuit_breaker_states_upstream_id_unique": {
          "name": "circuit_breaker_states_upstream_id_unique",
          "columns": ["upstream_id"],
          "isUnique": true
        },
        "circuit_breaker_states_upstream_id_idx": {
          "name": "circuit_breaker_states_upstream_id_idx",
          "columns": ["upstream_id"],
          "isUnique": false
        },
        "circuit_breaker_states_state_idx": {
          "name": "circuit_breaker_states_state_idx",
          "columns": ["state"],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "circuit_breaker_states_upstream_id_upstreams_id_fk": {
          "name": "circuit_breaker_states_upstream_id_upstreams_id_fk",
          "tableFrom": "circuit_breaker_states",
          "tableTo": "upstreams",
          "columnsFrom": ["upstream_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "compensation_rules": {
      "name": "compensation_rules",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "is_builtin": {
          "name": "is_builtin",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": false
        },
        "enabled": {
          "name": "enabled",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": true
        },
        "capabilities": {
          "name": "capabilities",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "target_header": {
          "name": "target_header",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "sources": {
          "name": "sources",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "mode": {
          "name": "mode",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'missing_only'"
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(cast((julianday('now') - 2440587.5)*86400000 as integer))"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(cast((julianday('now') - 2440587.5)*86400000 as integer))"
        }
      },
      "indexes": {
        "compensation_rules_name_unique": {
          "name": "compensation_rules_name_unique",
          "columns": ["name"],
          "isUnique": true
        },
        "compensation_rules_enabled_idx": {
          "name": "compensation_rules_enabled_idx",
          "columns": ["enabled"],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "request_billing_snapshots": {
      "name": "request_billing_snapshots",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "request_log_id": {
          "name": "request_log_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "api_key_id": {
          "name": "api_key_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "upstream_id": {
          "name": "upstream_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "model": {
          "name": "model",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "billing_status": {
          "name": "billing_status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "unbillable_reason": {
          "name": "unbillable_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "price_source": {
          "name": "price_source",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "base_input_price_per_million": {
          "name": "base_input_price_per_million",
          "type": "real",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "base_output_price_per_million": {
          "name": "base_output_price_per_million",
          "type": "real",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "input_multiplier": {
          "name": "input_multiplier",
          "type": "real",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "output_multiplier": {
          "name": "output_multiplier",
          "type": "real",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "prompt_tokens": {
          "name": "prompt_tokens",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "completion_tokens": {
          "name": "completion_tokens",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "total_tokens": {
          "name": "total_tokens",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "final_cost": {
          "name": "final_cost",
          "type": "real",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "currency": {
          "name": "currency",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'USD'"
        },
        "billed_at": {
          "name": "billed_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(cast((julianday('now') - 2440587.5)*86400000 as integer))"
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(cast((julianday('now') - 2440587.5)*86400000 as integer))"
        }
      },
      "indexes": {
        "request_billing_snapshots_request_log_id_unique": {
          "name": "request_billing_snapshots_request_log_id_unique",
          "columns": ["request_log_id"],
          "isUnique": true
        },
        "request_billing_snapshots_request_log_id_idx": {
          "name": "request_billing_snapshots_request_log_id_idx",
          "columns": ["request_log_id"],
          "isUnique": false
        },
        "request_billing_snapshots_billing_status_idx": {
          "name": "request_billing_snapshots_billing_status_idx",
          "columns": ["billing_status"],
          "isUnique": false
        },
        "request_billing_snapshots_model_idx": {
          "name": "request_billing_snapshots_model_idx",
          "columns": ["model"],
          "isUnique": false
        },
        "request_billing_snapshots_created_at_idx": {
          "name": "request_billing_snapshots_created_at_idx",
          "columns": ["created_at"],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "request_billing_snapshots_request_log_id_request_logs_id_fk": {
          "name": "request_billing_snapshots_request_log_id_request_logs_id_fk",
          "tableFrom": "request_billing_snapshots",
          "tableTo": "request_logs",
          "columnsFrom": ["request_log_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "request_billing_snapshots_api_key_id_api_keys_id_fk": {
          "name": "request_billing_snapshots_api_key_id_api_keys_id_fk",
          "tableFrom": "request_billing_snapshots",
          "tableTo": "api_keys",
          "columnsFrom": ["api_key_id"],
          "columnsTo": ["id"],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "request_billing_snapshots_upstream_id_upstreams_id_fk": {
          "name": "request_billing_snapshots_upstream_id_upstreams_id_fk",
          "tableFrom": "request_billing_snapshots",
          "tableTo": "upstreams",
          "columnsFrom": ["upstream_id"],
          "columnsTo": ["id"],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "request_logs": {
      "name": "request_logs",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "api_key_id": {
          "name": "api_key_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "upstream_id": {
          "name": "upstream_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "method": {
          "name": "method",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "path": {
          "name": "path",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "model": {
          "name": "model",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "prompt_tokens": {
          "name": "prompt_tokens",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "completion_tokens": {
          "name": "completion_tokens",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "total_tokens": {
          "name": "total_tokens",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "cached_tokens": {
          "name": "cached_tokens",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "reasoning_tokens": {
          "name": "reasoning_tokens",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "cache_creation_tokens": {
          "name": "cache_creation_tokens",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "cache_read_tokens": {
          "name": "cache_read_tokens",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "status_code": {
          "name": "status_code",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "duration_ms": {
          "name": "duration_ms",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "routing_duration_ms": {
          "name": "routing_duration_ms",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "error_message": {
          "name": "error_message",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "routing_type": {
          "name": "routing_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "group_name": {
          "name": "group_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "lb_strategy": {
          "name": "lb_strategy",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "priority_tier": {
          "name": "priority_tier",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "failover_attempts": {
          "name": "failover_attempts",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "failover_history": {
          "name": "failover_history",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "routing_decision": {
          "name": "routing_decision",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "session_id": {
          "name": "session_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "affinity_hit": {
          "name": "affinity_hit",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": false
        },
        "affinity_migrated": {
          "name": "affinity_migrated",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": false
        },
        "ttft_ms": {
          "name": "ttft_ms",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "is_stream": {
          "name": "is_stream",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": false
        },
        "session_id_compensated": {
          "name": "session_id_compensated",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": false
        },
        "header_diff": {
          "name": "header_diff",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(cast((julianday('now') - 2440587.5)*86400000 as integer))"
        }
      },
      "indexes": {
        "request_logs_api_key_id_idx": {
          "name": "request_logs_api_key_id_idx",
          "columns": ["api_key_id"],
          "isUnique": false
        },
        "request_logs_upstream_id_idx": {
          "name": "request_logs_upstream_id_idx",
          "columns": ["upstream_id"],
          "isUnique": false
        },
        "request_logs_created_at_idx": {
          "name": "request_logs_created_at_idx",
          "columns": ["created_at"],
          "isUnique": false
        },
        "request_logs_routing_type_idx": {
          "name": "request_logs_routing_type_idx",
          "columns": ["routing_type"],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "request_logs_api_key_id_api_keys_id_fk": {
          "name": "request_logs_api_key_id_api_keys_id_fk",
          "tableFrom": "request_logs",
          "tableTo": "api_keys",
          "columnsFrom": ["api_key_id"],
          "columnsTo": ["id"],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "request_logs_upstream_id_upstreams_id_fk": {
          "name": "request_logs_upstream_id_upstreams_id_fk",
          "tableFrom": "request_logs",
          "tableTo": "upstreams",
          "columnsFrom": ["upstream_id"],
          "columnsTo": ["id"],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "upstream_health": {
      "name": "upstream_health",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "upstream_id": {
          "name": "upstream_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "is_healthy": {
          "name": "is_healthy",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": true
        },
        "last_check_at": {
          "name": "last_check_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "last_success_at": {
          "name": "last_success_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "failure_count": {
          "name": "failure_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "latency_ms": {
          "name": "latency_ms",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "error_message": {
          "name": "error_message",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {
        "upstream_health_upstream_id_unique": {
          "name": "upstream_health_upstream_id_unique",
          "columns": ["upstream_id"],
          "isUnique": true
        },
        "upstream_health_upstream_id_idx": {
          "name": "upstream_health_upstream_id_idx",
          "columns": ["upstream_id"],
          "isUnique": false
        },
        "upstream_health_is_healthy_idx": {
          "name": "upstream_health_is_healthy_idx",
          "columns": ["is_healthy"],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "upstream_health_upstream_id_upstreams_id_fk": {
          "name": "upstream_health_upstream_id_upstreams_id_fk",
          "tableFrom": "upstream_health",
          "tableTo": "upstreams",
          "columnsFrom": ["upstream_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "upstreams": {
      "name": "upstreams",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "base_url": {
          "name": "base_url",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "api_key_encrypted": {
          "name": "api_key_encrypted",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "is_default": {
          "name": "is_default",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": false
        },
        "timeout": {
          "name": "timeout",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 60
        },
        "is_active": {
          "name": "is_active",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": true
        },
        "config": {
          "name": "config",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "weight": {
          "name": "weight",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 1
        },
        "priority": {
          "name": "priority",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "route_capabilities": {
          "name": "route_capabilities",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "allowed_models": {
          "name": "allowed_models",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "model_redirects": {
          "name": "model_redirects",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "affinity_migration": {
          "name": "affinity_migration",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "billing_input_multiplier": {
          "name": "billing_input_multiplier",
          "type": "real",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 1
        },
        "billing_output_multiplier": {
          "name": "billing_output_multiplier",
          "type": "real",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 1
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(cast((julianday('now') - 2440587.5)*86400000 as integer))"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(cast((julianday('now') - 2440587.5)*86400000 as integer))"
        }
      },
      "indexes": {
        "upstreams_name_unique": {
          "name": "upstreams_name_unique",
          "columns": ["name"],
          "isUnique": true
        },
        "upstreams_name_idx": {
          "name": "upstreams_name_idx",
          "columns": ["name"],
          "isUnique": false
        },
        "upstreams_is_active_idx": {
          "name": "upstreams_is_active_idx",
          "columns": ["is_active"],
          "isUnique": false
        },
        "upstreams_priority_idx": {
          "name": "upstreams_priority_idx",
          "columns": ["priority"],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    }
  },
  "views": {},
  "enums": {},
  "_meta": {
    "schemas": {},
    "tables": {},
    "columns": {}
  },
  "internal": {
    "indexes": {}
  }
}
